extends ../../layouts/default.pug
include ../../mixins/alert.pug
block content
  h1.mb-4 Permission
  +alert-success("5000")
  +alert-error("5000")
  if records
    div(data-records=records)
    form#form-change-permissions(method="POST" action=`${prefixAdmin}/roles/permissions?_method=PATCH` form-change-permissions)
      .text-right
        button(
          type="submit"
          class="btn btn-primary mb-3"
          button-submit
        ) Cập nhật

      table.table.table-hover.table-sm(table-permissions)
        thead
          tr
            th Tính năng
            each item in records
              th.text-center #{item.title}

        tbody
          tr(data-name="id" class="d-none")
            td 
            each item in records
              td.text-center
                input(type="text", value=item.id, readonly)

          tr
            td(colspan=records.length + 1)
              b Danh mục sản phẩm

          tr(data-name="products-category_view")
            td Xem
            each item in records
              td.text-center
                input(type="checkbox", name=`permissions[${item.id}][products-category_view]`)

          tr(data-name="products-category_create")
            td Thêm
            each item in records
              td.text-center
                input(type="checkbox", name=`permissions[${item.id}][products-category_create]`)

          tr(data-name="products-category_edit")
            td Sửa
            each item in records
              td.text-center
                input(type="checkbox", name=`permissions[${item.id}][products-category_edit]`)

          tr(data-name="products-category_delete")
            td Xóa
            each item in records
              td.text-center
                input(type="checkbox", name=`permissions[${item.id}][products-category_delete]`)
                
                //- Products
          tr
            td(colspan=records.length + 1)
              b Sản phẩm

          tr(data-name="products_view")
            td Xem
            each item in records
              td.text-center
                input(type="checkbox", name=`permissions[${item.id}][products_view]`)

          tr(data-name="products_create")
            td Thêm
            each item in records
              td.text-center
                input(type="checkbox", name=`permissions[${item.id}][products_create]`)

          tr(data-name="products_edit")
            td Sửa
            each item in records
              td.text-center
                input(type="checkbox", name=`permissions[${item.id}][products_edit]`)

          tr(data-name="products_delete")
            td Xóa
            each item in records
              td.text-center
                input(type="checkbox", name=`permissions[${item.id}][products_delete]`)
                //- Roles
          tr
            td(colspan=records.length + 1)
              b Nhóm quyền

          tr(data-name="roles_view")
            td Xem
            each item in records
              td.text-center
                input(type="checkbox", name=`permissions[${item.id}][roles_view]`)

          tr(data-name="roles_create")
            td Thêm
            each item in records
              td.text-center
                input(type="checkbox", name=`permissions[${item.id}][roles_create]`)

          tr(data-name="roles_edit")
            td Sửa
            each item in records
              td.text-center
                input(type="checkbox", name=`permissions[${item.id}][roles_edit]`)

          tr(data-name="roles_delete")
            td Xóa
            each item in records
              td.text-center
                input(type="checkbox", name=`permissions[${item.id}][roles_delete]`)
          tr(data-name="roles_permission")
            td Phân quyền
            each item in records
              td.text-center
                input(type="checkbox", name=`permissions[${item.id}][roles_permission]`)

      -// Hidden input để chứa dữ liệu permissions dạng JSON
      input(type="hidden", name="permissions")

    script(src="/admin/js/role.js")
    script(src="/admin/js/product.js")